<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE components PUBLIC "-//SEASAR//DTD S2Container 2.3//EN"
	"http://www.seasar.org/dtd/components23.dtd">
<components>
    <include path="s2mule-receiver.dicon"/>

    <!-- -Messageを受信するPOJOの設定 -->
	<component name="echoUMO" 
				class="org.mule.extras.seasar2.receiver.impl.Echo" />
	
	<!-- 標準入力のEndpointの設定 -->
	<component 
	   name="stream_in" 
	   class="org.mule.extras.seasar2.config.impl.EndpointConfigImpl" >
	   <property name="uri">"stdio://System.in"</property>
	</component>
	
	<!-- JMSのEndpointの設定 -->
	<component 
	   name="jms_in" class="org.mule.extras.seasar2.config.impl.EndpointConfigImpl" >
	 <property name="uri">"jms://Foo"</property>
	   <property name="connectorConfig">
	   <!-- ActiveMQ Jms connectorの設定 -->
        <component class="org.mule.extras.seasar2.config.impl.ActiveMQJmsConnectorConfigImpl" >
            <!-- brokerURLの設定 -->
            <property name="brokerURL">
                    "tcp://localhost:61616"
            </property>
        </component>
	   </property>
	</component>
	
	<!-- UMOとEndpointの関連付けの設定 -->
	<component class="org.mule.extras.seasar2.receiver.impl.S2MuleConfiguration" >
	   
	   <!-- Endpointは２つ -->
		<initMethod name="addInbounEndpoint">
			<arg>stream_in</arg>
		</initMethod>
		<initMethod name="addInbounEndpoint">
            <arg>jms_in</arg>
        </initMethod>
        
        <!-- メッセージを受け取るPOJO -->
		<property name="umoImpl">echoUMO</property>
	</component>

</components>
